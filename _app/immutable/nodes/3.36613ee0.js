import{s as se,n as K,r as ae,g as le,b as Q}from"../chunks/scheduler.7a7c0b35.js";import{S as ne,i as re,s as D,g as c,m as oe,c as L,h as f,C as B,j as R,f as x,n as ie,k as t,a as W,x as r,B as z,z as A,o as ue}from"../chunks/index.0a1868cf.js";import{a as te,g as ce}from"../chunks/apiFetch.bc854194.js";import{g as fe}from"../chunks/get.4329af93.js";import{l as X,a as Z}from"../chunks/loadingStore.store.cd0289c0.js";import{r as $}from"../chunks/redirectStore.store.67106077.js";const me=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;async function ve(e,m){return await te("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:m})})}async function de(e,m){return await te("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:m})}),ve(e,m)}const{document:he}=me;function ge(e){let m,s,k='<div class="flex flex-col items-center gradient-text gradient-heading1 svelte-gtafvv"><h1 class="text-center h2 svelte-gtafvv">Welcome to the</h1> <h2 class="h1 gradient-text gradient-heading2 svelte-gtafvv">New WhatsApp</h2> <h3 class="h3 text-center svelte-gtafvv">We provide complete privacy with a seamless experience</h3></div>',w,u,v,h,C='So, what are you waiting for? <h2 class="h2 text-center leading-loose svelte-gtafvv">Register Now!</h2>',N,a,g,b,H="Email Address",I,i,M,p,y,U="Password",n,l,S,T,O,P,_,J="Register/Login",F,Y;return{c(){m=D(),s=c("div"),s.innerHTML=k,w=D(),u=c("div"),v=c("div"),h=c("h4"),h.innerHTML=C,N=D(),a=c("form"),g=c("label"),b=c("span"),b.textContent=H,I=D(),i=c("input"),M=D(),p=c("label"),y=c("span"),y.textContent=U,n=D(),l=c("input"),S=D(),T=c("p"),O=oe(e[3]),P=D(),_=c("button"),_.textContent=J,this.h()},l(o){m=L(o),s=f(o,"DIV",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-1tv4yw0"&&(s.innerHTML=k),w=L(o),u=f(o,"DIV",{class:!0});var d=R(u);v=f(d,"DIV",{class:!0});var j=R(v);h=f(j,"H4",{class:!0,"data-svelte-h":!0}),B(h)!=="svelte-1792lq6"&&(h.innerHTML=C),N=L(j),a=f(j,"FORM",{method:!0,class:!0});var E=R(a);g=f(E,"LABEL",{class:!0});var q=R(g);b=f(q,"SPAN",{class:!0,"data-svelte-h":!0}),B(b)!=="svelte-1pum4x2"&&(b.textContent=H),I=L(q),i=f(q,"INPUT",{placeholder:!0,type:!0,name:!0,class:!0}),q.forEach(x),M=L(E),p=f(E,"LABEL",{class:!0});var V=R(p);y=f(V,"SPAN",{class:!0,"data-svelte-h":!0}),B(y)!=="svelte-1kvjhoz"&&(y.textContent=U),n=L(V),l=f(V,"INPUT",{placeholder:!0,type:!0,name:!0,class:!0,min:!0,minlength:!0}),V.forEach(x),S=L(E),T=f(E,"P",{class:!0});var G=R(T);O=ie(G,e[3]),G.forEach(x),P=L(E),_=f(E,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(_)!=="svelte-15uy40b"&&(_.textContent=J),E.forEach(x),j.forEach(x),d.forEach(x),this.h()},h(){t(s,"class","flex items-center w-full min-h-[100dvh] max-w-xs sm:max-w-md md:max-w-xl lg:max-w-2xl xl:max-w-3xl mx-auto svelte-gtafvv"),t(h,"class","h4 mb-4 !font-normal gradient-text gradient-heading2 svelte-gtafvv"),t(b,"class","svelte-gtafvv"),t(i,"placeholder","my-email@example.com"),t(i,"type","email"),t(i,"name","email"),t(i,"class","input variant-form-material svelte-gtafvv"),i.required=!0,t(g,"class","label svelte-gtafvv"),t(y,"class","svelte-gtafvv"),t(l,"placeholder","********"),t(l,"type","password"),t(l,"name","password"),t(l,"class","input variant-form-material svelte-gtafvv"),t(l,"min","8"),l.required=!0,t(l,"minlength","8"),t(p,"class","label svelte-gtafvv"),t(T,"class","text-xs text-error-500 svelte-gtafvv"),t(_,"type","submit"),t(_,"class","btn rounded-md bg-gradient-to-br variant-gradient-primary-tertiary text-primary-50 svelte-gtafvv"),t(a,"method","post"),t(a,"class","flex flex-col gap-4 svelte-gtafvv"),t(v,"class","w-full bg-surface-50-900-token shadow-2xl p-6 mx-auto max-w-md sm:max-w-lg rounded-lg svelte-gtafvv"),t(u,"class","min-h-screen flex flex-row w-full items-center svelte-gtafvv")},m(o,d){W(o,m,d),W(o,s,d),e[9](s),W(o,w,d),W(o,u,d),r(u,v),r(v,h),r(v,N),r(v,a),r(a,g),r(g,b),r(g,I),r(g,i),z(i,e[1]),r(a,M),r(a,p),r(p,y),r(p,n),r(p,l),z(l,e[2]),r(a,S),r(a,T),r(T,O),r(a,P),r(a,_),e[14](a),F||(Y=[A(he.body,"scroll",e[8]),A(i,"input",e[10]),A(i,"focus",e[11]),A(l,"input",e[12]),A(l,"focus",e[13]),A(a,"submit",e[7])],F=!0)},p(o,[d]){d&2&&i.value!==o[1]&&z(i,o[1]),d&4&&l.value!==o[2]&&z(l,o[2]),d&8&&ue(O,o[3])},i:K,o:K,d(o){o&&(x(m),x(s),x(w),x(u)),e[9](null),e[14](null),F=!1,ae(Y)}}}const ee=1;function pe(e,m,s){let k="",w="",u="",v=0,h=0,C,N,a=!1;const g=n=>{let l=h-n;h=n,!a&&l<-ee&&(s(6,a=!0),setTimeout(()=>{s(6,a=!1)},400),l<-ee&&(C.focus(),document.body.scrollTo(0,C.getBoundingClientRect().top+n)))},b=async n=>{n.preventDefault(),X.set(!0);const l=await de(k,w);if(l.ok===!1){s(3,u="Invalid credentials");return}const S=await l.json();Z.set({accessToken:S.accessToken,refreshToken:S.refreshToken});const T=await fe(k);if(T.ok===!1){s(3,u="Something went wrong");return}const P=(await T.json())[0];Z.set({accessToken:S.accessToken,refreshToken:S.refreshToken,id:P.id,email:P.email});const _=le($)||"/chats";$.set(""),ce(_),X.set(!1)},H=n=>{s(0,v=n.target.scrollTop),a&&n.preventDefault()};function I(n){Q[n?"unshift":"push"](()=>{N=n,s(5,N)})}function i(){k=this.value,s(1,k)}const M=()=>{s(3,u="")};function p(){w=this.value,s(2,w)}const y=()=>{s(3,u="")};function U(n){Q[n?"unshift":"push"](()=>{C=n,s(4,C)})}return e.$$.update=()=>{e.$$.dirty&1&&g(v)},[v,k,w,u,C,N,a,b,H,I,i,M,p,y,U]}class ke extends ne{constructor(m){super(),re(this,m,pe,ge,se,{})}}export{ke as component};
